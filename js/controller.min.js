!function(a,b){a.controller("cDetail",["vUser","vChannel",function(c,d){var e=a.util.getUrlParam().type,f=a.util.getUrlParam().id,g=encodeURIComponent(window.location.href);sessionStorage.setItem("waNews",g);0==e?d.getStaticDetails({id:f},function(c){var d=c.data.author,e=c.data.body,f=c.data.channel.channelName.replace(/\s/g,""),g=c.data.id,h=c.data.publishTime,i=c.data.title,j=c.data.webName,k=c.data.type,l=c.data.images,m=c.data.logoUrl,n=c.data.srcUrl,o=c.data.cooperateStatus,p="";if(l.length>0)for(var q=l.length-1;q>=0;q--)e=e.replace("tdnews://img"+q,l[q]?'<img src="'+l[q].imageUrl+'"/>':"");p="<div class ='bottomBanner'>",p+=" <a href='javascript:void(0);' id='banner'><img src='../image/banner.png'/><img src='../image/banner_button.png' class='btn'/></a>",p+="</div>",p+=" <div class='innerTop'><div class='back'><a href='main.html'><img src='../image/back.png'/></a></div><a href='initial.html?srcUrl="+encodeURIComponent(n)+"&type="+k+"&id="+g+"&cooperateStatus="+o+"'><img class='inner' src='../image/original.png'/></a></div><div class='center'>",p+="<div class='content'>",p+=" <div class='innerUp'>",p+=" <div class='left'>",p+=m?"  <div class='logo '><img onload='imgResponsivetwo(this,1)' src='"+m+"'/></div>":"  <div class='logo '><img src='../image/default.jpg'/></div>",p+="  </div>",p+="  <div class='right'>",p+="  <div class='webName'>"+j+"</div>",h&&(p+="  <div class='time'>"+h+"</div>"),p+=" </div>",p+=" <div class='cf'></div>",p+="    </div>",d&&(p+="   <div class='authorName'>"+d+"</div>"),f&&(p+="   <div class='channelName'><a href='main.html'>進入"+f+"頻道</a></div>"),p+=" <div class='cf'></div>",p+="   <div class='innerBody'>",p+="   <div class='innerTitle'>"+i+"</div>",p+="<div class='article'>"+e+"</div>",p+=" <div class='articleBottom'>",p+="   <div class='sourceUrl'><a href='"+n+"'>打開原網址<a/></div>",p+="   <div class='channel'><a href='main.html'>進入"+f+"頻道</a></div>",p+="   </div>",p+="   </div>",p+=" </div></div>",b(".outer1").html(p),0!=o?b(".bottomBanner").hide():(b(".outer1 .innerTop .inner").hide(),b(".bottomBanner").show(),navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i)&&b(".bottomBanner").show(),b(".outer1").on("click","#banner",function(){a.util.browserVersion.android?mobileAppInstall.open("wanews://www.wanews.co/main","market://details?id=com.tdhot.kuaibao.android.v2","https://play.google.com/store/apps/details?id=com.tdhot.kuaibao.android.v2"):a.util.browserVersion.ios&&mobileAppInstall.open("wanews://www.wanews.co/main","https://itunes.apple.com/app/id1107258303")}))}):2==e&&d.getTopics({id:f},function(c){function d(a){switch(a){case 0:return"details.html?type="+v+"&id="+s;case 3:return param.srcUrl;case 1:return"initial.html?srcUrl="+t+"&type="+v+"&id="+s;case 2:case 4:return"initial.html?srcUrl="+encodeURIComponent(t)+"&type="+v+"&id="+s}}var e=c.data.desc,f=c.data.imageVo.imageUrl,g=c.data.simpleObjectVoList,h=c.data.title,i="",j=(c.data.topicId,c.data.cooperateStatus);b(".outer1").hide(),b(".outer3").show(),i+="<div class ='bottomBanner'>  <a href='javascript:void(0);' id='banner'><img src='../image/banner.png'/><img src='../image/banner_button.png' class='btn'/></a></div>",i+="<div class='header'><img onload='imgResponsive(this,1)' src='"+f+"'/>",i+=" <div class='up'>",i+="<a href='main.html'><img src='../image/backred.png'/></a>",i+="<a id='center'>"+h+"</a>",i+="<div class='cf'></div>",i+="</div>",i+="<div class='down'><p>"+e+"</p></div>",i+="<div class='background'><img src='../image/jc.png' /></div></div> <div class='center'>",i+="<div class='content'>";for(var k=0;k<g.length;k++){var l=g[k].showStyle,m=g[k].coverImage,n=g[k].title,o=g[k].cooperateStatus;n.length>25&&(n=n.slice(0,25)+"...");var p=g[k].images,q=g[k].webName,r=g[k].imageCount,s=g[k].id,t=g[k].srcUrl;sessionStorage.setItem("src",t);var u=g[k].subTitle,v=g[k].type,w=a.util.formatDate(g[k].createdAt);if(0==l){var x=d(o);i+="<div class='second'>",i+="<div class='up' id='"+s+"'><a href='"+x+"'>"+n+"</a></div>",i+="<div class='bottom'>"+q+"</div>",i+="</div>"}else if(1==l){var x=d(o);i+="<div class='first'>",i+="<div class='left' id='"+s+"'><a href='"+x+"'><img onload='imgResponsive(this,2)' src='"+p[0].imageUrl+"'/></a></div>",i+="<div class='right'>",i+="<div class='up' id='"+s+"'><a href='"+x+"'>"+n+"</a><p></p></div>",i+="<div class='bottom'>"+q+" &nbsp;"+w+"</div>",i+="</div>",i+="<div class='cf'></div>",i+="</div>"}else if(2==l){var x=d(o);i+="<div class='second'>",i+="<div class='up' id='"+s+"' ><a href='"+x+"'>"+n+"</a></div>",i+="<div class='img'><a class='bigImage' href='"+x+"' ><img onload='imgResponsive(this,1)' src='"+m.imageUrl+"'/></a></div>",i+="<div class='bottom'>"+q+" &nbsp;"+w+"</div>",i+="</div>"}else if(3==l){var x=d(o);i+="<div class='second'>",i+="<div class='up' id='"+s+"' ><a href='"+x+"'>"+n+"</a></div>",i+="<div class='img3'>",i+="<a><img onload='imgResponsive(this,3)' src='"+p[0].imageUrl+"'/></a>",i+="<a><img onload='imgResponsive(this,3)' src='"+p[1].imageUrl+"'/></a>",i+="<a><img onload='imgResponsive(this,3)' src='"+p[2].imageUrl+"'/></a>",i+="<div class='cf'></div >",i+="</div>",i+="<div class='bottom'>"+q+" &nbsp;"+w+"</div>",i+="</div>"}else if(4==l){var x=d(o);i+="<div class='second'>",i+="<div class='up'id='"+s+"' ><a href='"+x+"'>"+n+"</a></div>",i+="<div class='img'><a href='"+x+"'><img src='"+m.imageUrl+"'/></a><div class='f'>"+r+"<h1>pcs</h1></div>",u&&(i+="<div class='subTitle'><p>"+u+"</p></div></div>"),i+="<div class='bottom'>"+q+" &nbsp;"+w+"</div>",i+="</div>"}}b(".outer3").html(i+" </div></div>"),0!=j?(b(".bottomBanner").hide(),b(".outer1 .content").css("padding-bottom","0")):(b(".bottomBanner").hide(),navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i)&&b(".bottomBanner").show(),b(".outer3").on("click","#banner",function(){a.util.browserVersion.android?mobileAppInstall.open("wanews://www.wanews.co/main","market://details?id=com.tdhot.kuaibao.android.v2","https://play.google.com/store/apps/details?id=com.tdhot.kuaibao.android.v2"):a.util.browserVersion.ios&&mobileAppInstall.open("wanews://www.wanews.co/main","https://itunes.apple.com/app/id1107258303")}))})}])}(window.gg,jQuery),function(a,b){a.controller("cImage",[function(){var c=a.util.getUrlParam().srcUrl,d=a.util.getUrlParam().src;console.log(decodeURIComponent(d));var e=(decodeURIComponent(sessionStorage.getItem("waNews")),a.util.getUrlParam().type),f=a.util.getUrlParam().cooperateStatus,g=a.util.getUrlParam().id;b(".wa").attr("href","details.html?type="+e+"&id="+g),c?html="<iframe src='"+decodeURIComponent(c)+"'></iframe>":d&&(html="<iframe  src='details.html?type='+type+'&id='+id></iframe>"),b(".center").html(html),1==e&&(b(".ups").hide(),b(".inner").hide()),0!=f?(b(".outer2 .center iframe").css("padding-bottom","0"),b(".bottomBanner").hide(),1==f&&b(".outer2 .innerTop .inner").hide(),(2==f||4==f)&&b(".outer2 .innerTop .inner").show()):(b(".bottomBanner").show(),navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i)?b(".bottomBanner").show():(b(".outer2 .center iframe").css("padding-bottom","0"),b(".bottomBanner").hide())),b(".outer2").on("click","#banner",function(){a.util.browserVersion.android?mobileAppInstall.open("wanews://www.wanews.co/main","market://details?id=com.tdhot.kuaibao.android.v2","https://play.google.com/store/apps/details?id=com.tdhot.kuaibao.android.v2"):a.util.browserVersion.ios&&mobileAppInstall.open("wanews://www.wanews.co/main","https://itunes.apple.com/app/id1107258303")})}])}(window.gg,jQuery),function(a,b){a.controller("cIndex",["vUser","vChannel",function(c,d){function e(){d.getContent({id:sessionStorage.getItem("id"),since:f.since},function(a){f.since=a.data.since,b(".content").append(g.buildList("",a.data.list))})}var f={since:0,id:-1,name:"",isLoad:!1},g={buildList:function(c,d){if(d.length>0)for(var e=0;e<d.length;e++)d[e].name=f.name?f.name.replace(/\s/g,""):"",d[e].time=a.util.formatDate(d[e].createdAt),d[e].srcUrl=encodeURIComponent(d[e].srcUrl),c=this.getListDom(c,d[e]),2==d[e].type&&b(".hot").show();return c},getListDom:function(a,b){switch(b.showStyle){case 0:return a=this.buildSecond(a,b),this.build0(a,b);case 1:return a=this.buildFirst(a,b),this.build1(a,b);case 2:return a=this.buildSecond(a,b),this.build2(a,b);case 3:return a=this.buildSecond(a,b),this.build3(a,b);case 4:return a=this.buildSecond(a,b),this.build4(a,b)}return""},buildFirst:function(a,b){return a+="<div class='first'>",2==b.type&&(a+="<div class='hot'type='"+b.type+"' > <img src = '../image/circle.png' /></div>"),a},buildSecond:function(a,b){return a+="<div class='second'>",2==b.type&&(a+="<div class='hot' type='"+b.type+"' > <img src = '../image/circle.png' /></div>"),a},build0:function(a,b){var c=this.build5(a,b);return a+="<div class='up' id='"+b.id+"' '><a href='javascript:void(0)'skip = '"+decodeURIComponent(c)+"'srcUrl="+b.srcUrl+" >"+b.title+"</a><p></p></div>",a+="<div class='bottom'>"+b.webName+" &nbsp;"+b.time+"</div>",a+="</div>"},build1:function(a,b){var c=this.build5(a,b);return a+="<div class='left'  id='"+b.id+"''><a href='javascript:void(0)' skip= '"+decodeURIComponent(c)+"'srcUrl="+b.srcUrl+"><img onload='imgResponsive(this,2)' src='"+b.images[0].imageUrl+"'/></a></div>",a+="<div class='right'>",a+="<div class='up' id='"+b.id+"' '><a href='javascript:void(0)'skip= '"+decodeURIComponent(c)+"'srcUrl="+b.srcUrl+">",a+=b.title.length>25?b.title.slice(0,25)+"...":b.title,a+="</a><p></p></div>",a+="<div class='bottom'>"+b.webName+" &nbsp;"+b.time+"</div>",a+="</div>",a+="<div class='cf'></div>",a+="</div>"},build2:function(a,b){var c=this.build5(a,b);return a+="<div class='up' id='"+b.id+"' '><a href='javascript:void(0)' skip= '"+decodeURIComponent(c)+"'srcUrl="+b.srcUrl+">",b.title&&(a+=b.title),a+="</a></div>",a+="<div class='imgs'><a class='bigImage'href='javascript:void(0)' skip= '"+decodeURIComponent(c)+"'srcUrl="+b.srcUrl+"><img onload='imgResponsive(this,1)' src='"+b.coverImage.imageUrl+" '/></a></div>",a+="<div class='bottom'>"+b.webName+" &nbsp;"+b.time+"</div>",a+="</div>"},build3:function(a,b){var c=this.build5(a,b);return a+="<div class='up' id='"+b.id+"' '><a href='javascript:void(0)' skip= '"+decodeURIComponent(c)+"'srcUrl="+b.srcUrl+">",b.title&&(a+=b.title),a+="</a></div>",a+="<div class='img3'>",a+="<a href='javascript:void(0)' skip= '"+decodeURIComponent(c)+"'srcUrl="+b.srcUrl+"><img onload='imgResponsive(this,3)' src='"+b.images[0].imageUrl+"'/></a>",a+="<a href='javascript:void(0)' skip= '"+decodeURIComponent(c)+"'srcUrl="+b.srcUrl+"><img onload='imgResponsive(this,3)' src='"+b.images[1].imageUrl+"'/></a>",a+="<a href='javascript:void(0)' skip= '"+decodeURIComponent(c)+"'srcUrl="+b.srcUrl+"><img onload='imgResponsive(this,3)' src='"+b.images[2].imageUrl+"'/></a>",a+="<div class='cf'></div >",a+="</div>",a+="<div class='bottom'>"+b.webName+" &nbsp;"+b.time+"</div>",a+="</div>"},build4:function(a,b){var c=this.build5(a,b);return a+="<div class='up' id='"+b.id+"' '><a href= '"+c+"'>"+b.title+"</a></div>",a+="<div class='img' ><a  href= '"+c+"'><img src='"+b.coverImage.imageUrl+"'/></a><div class='f'>"+b.imageCount+"<h1>pcs</h1></div>",b.subTitle&&(a+="<div class='subTitle'><p>"+b.subTitle+"</p></div></div>"),a+="<div class='bottom'>"+b.webName+" &nbsp;"+b.time+"</div>",a+="</div>",a+="</div>"},build5:function(a,b){switch(b.cooperateStatus){case 0:return"details.html?type="+b.type+"&id="+b.id;case 3:return b.srcUrl;case 1:return"initial.html?srcUrl="+encodeURIComponent(b.srcUrl)+"&type="+b.type+"&id="+b.id+"&cooperateStatus="+b.cooperateStatus;case 2:case 4:return"initial.html?srcUrl="+encodeURIComponent(b.srcUrl)+"&type="+b.type+"&id="+b.id+"&cooperateStatus="+b.cooperateStatus}}},h=function(c,d){if(c.length>0){var e=new a.ImgPoll(".shift");b(".shift").show();for(var f=[],g=[],h="",i="",j=0;j<c.length;j++)f[j]=c[j].coverImage.imageUrl,h=c[j].type,i=c[j].id,g[j]={url:f[j],bannerTitle:c[j].title,detail:"details.html?type="+h+"&id="+i};e.init({data:g})}else b(".shift").hide()};d.getLists({},function(a){var c=a.data;if(c){for(var d="",e=0;e<c.length;e++)d+='<li id="'+e+'" idss="'+c[e].channelId+'" name="'+c[e].channelName+'">'+c[e].channelName+"</li>";b(".menu").html("<ul>"+d+"</ul>"),b(".menu ul").scrollLeft(sessionStorage.getItem("length"))}}),sessionStorage.getItem("id")>0?d.getContent({id:sessionStorage.getItem("id")},function(a){var c=b(' li:eq("'+sessionStorage.getItem("idLi")+'")');c.css("color","#00bcd4").css("font-size","0.4166666rem").css("border-bottom","3px solid #f44336"),f.since=a.data.since,f.id=c.attr("id"),f.name=c.attr("name"),h(a.data.banners,f.id),b(".content").html(g.buildList("",a.data.list))}):(sessionStorage.setItem("id",0),d.getContent({id:0},function(a){var c=b("li:first");c.css("color","#f44336").css("font-size","0.4166666rem").css("border-bottom","3px solid #00bcd4"),f.since=a.data.since,f.id=c.attr("id"),f.name=c.attr("name"),h(a.data.banners,f.id),b(".content").html(g.buildList("",a.data.list))})),b(".menu").on("click","li",function(){f.id=b(this).attr("id"),f.name=b(this).attr("name");for(var a=b(this).parent().children(),c=0;c<a.length;c++)0==c?b(this).css("color","#f44336").css("font-size","0.4166666rem").css("border-bottom","3px solid #00bcd4"):c==b(this).attr("id")?b(this).css("color","#00bcd4").css("font-size","0.4166666rem").css("border-bottom","3px solid #f44336"):b(this).siblings().css("color","#000000").css("font-size","0.4166666rem").css("border-bottom","hidden");sessionStorage.setItem("id",b(this).attr("idss")),sessionStorage.setItem("idLi",f.id);var e=b(".menu ul").scrollLeft();sessionStorage.setItem("length",e),d.getContent({id:sessionStorage.getItem("id")},function(a){f.since=a.data.since,h(a.data.banners,f.id),b(".content").html(g.buildList("",a.data.list)),document.getElementsByTagName("body")[0].scrollTop=0})}),b(".content").on("click","a",function(){null!=b(this).attr("srcUrl")&&sessionStorage.setItem("srcUrl",b(this).attr("srcUrl")),sessionStorage.setItem("skip",b(this).attr("skip")),window.location.href=b(this).attr("skip")}),navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i)?b(".bottomBanner").show():b(".bottomBanner").hide(),b(".outer").on("click","#banner",function(){a.util.browserVersion.android?mobileAppInstall.open("wanews://www.wanews.co/main","market://details?id=com.tdhot.kuaibao.android.v2","https://play.google.com/store/apps/details?id=com.tdhot.kuaibao.android.v2"):a.util.browserVersion.ios&&mobileAppInstall.open("wanews://www.wanews.co/main","https://itunes.apple.com/app/id1107258303")});var i=setTimeout(null,50);b(document).scroll(function(){b(document).height()-b(window).scrollTop()-b(window).height()<80&&(clearTimeout(i),i=setTimeout(e,300))})}])}(window.gg,jQuery);
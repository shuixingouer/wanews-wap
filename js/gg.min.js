!function(){window.gg=window.gg||{},gg.util={extend:function(){var a=Array.prototype.slice.call(arguments),b=!1,c=a.length;"boolean"==typeof a[c-1]&&(b=a[c-1],c--);for(var d={},e=0;c>e;e++)for(var f in a[e]){var g=a[e][f];if(b&&"object"==typeof g)if(g instanceof Array){for(var h=[],i=0;i<g.length;i++)"object"==typeof g[i]?h.push(gg.extend(g[i],!0)):h.push(g[i]);g=h}else g=gg.extend(g,!0);d[f]=g}return d},copy:function(a){return JSON.parse(JSON.stringify(a))},create:function(a){function b(){a.apply(this,c)}if("function"==typeof a){var c=Array.prototype.slice.call(arguments),d=function(){};return d.prototype=a.prototype,b.prototype=new d,b.prototype.constructor=b,b}return function(){}},ajax:function(a){var b=this.extend({type:"GET",async:!1,dataType:"string"},a),c=new XMLHttpRequest;c.open(b.type.toUpperCase(),b.url,b.async),c.onreadystatechange=function(a){4==c.readyState&&(c.status>=400?b.error(a):b.success("JSON"===b.dataType.toUpperCase()?JSON.parse(a.currentTarget.responseText):a.currentTarget.responseText))},c.send()},setCache:function(a,b,c){switch("object"==typeof b&&(b=JSON.stringify(b)),c){case"sessionStorage":sessionStorage.setItem(a,b);break;case"localStorage":localStorage.setItem(a,b);break;default:sessionStorage.setItem(a,b)}},getCache:function(a){var b=sessionStorage.getItem(a)||localStorage.getItem(a);try{return JSON.parse(b)}catch(c){return b}},clearCache:function(){sessionStorage.clear(),localStorage.clear()},pageScroll:function(){var a=setInterval(function(){window.scrollBy(0,-50),0==document.documentElement.scrollTop&&0==document.body.scrollTop&&clearInterval(a)},20)},getUrlParam:function(){var a={},b=location.search.split("?");b.shift();var c=b.join("");if(c)for(var d=c.split("&"),e=0,f=d.length;f>e;e++){var g=d[e].split("=");a[g[0]]=g[1]}return a},formatDate:function(a){var b=(new Date).getTime()-a;return 6e4>b?"剛剛":36e5>b?parseInt(b/6e4)+"分鐘前":864e5>b?parseInt(b/36e5)+"小時前":parseInt(b/864e5)+"天前"},browserVersion:function(){navigator.userAgent||navigator.appVersion;return{trident:navigator.userAgent.indexOf("Trident")>-1,presto:navigator.userAgent.indexOf("Presto")>-1,webKit:navigator.userAgent.indexOf("AppleWebKit")>-1,gecko:navigator.userAgent.indexOf("Gecko")>-1&&-1==navigator.userAgent.indexOf("KHTML"),mobile:!!navigator.userAgent.match(/AppleWebKit.*Mobile.*/),ios:!!navigator.userAgent.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:navigator.userAgent.indexOf("Android")>-1||navigator.userAgent.indexOf("Linux")>-1,iPhone:navigator.userAgent.indexOf("iPhone")>-1||navigator.userAgent.indexOf("Mac")>-1,iPad:navigator.userAgent.indexOf("iPad")>-1,webApp:-1==navigator.userAgent.indexOf("Safari")}}(),util:{splitWhite:function(a){return a.match(/\S+/g)||[]}}}}(),function(a){function b(a,b,c){this.name=a,this.parent=c,b&&(this.params=1==b.length?[]:b.splice(0,b.length-1),this.cb=b.pop())}function c(){b.apply(this,arguments),this.cache=null}function d(){b.apply(this,arguments)}function e(){b.apply(this,arguments)}c.prototype=new b,c.prototype.setData=function(a){return this.cache=window.gg.util.copy(a),this.cache},c.prototype.getData=function(){return this.cache},d.prototype=new b,e.prototype=new b,e.prototype.run=function(){this.cb.apply(this,this.parent.go(this.params,this.name))},window.gg=a.extend(window.gg||{},{pros:{},controls:{},provide:function(a,f,g){var h=null;switch(g){case"model":h=this.pros[a]=new c(a,f,this);break;case"viewModel":h=this.pros[a]=new d(a,f,this);break;case"provide":h=this.pros[a]=new b(a,f,this);break;case"controller":h=this.controls[a]=new e(a,f,this)}return h},controller:function(a,b){return this.provide(a,b,"controller")},model:function(a,b){return this.provide(a,b,"model")},viewModel:function(a,b){return this.provide(a,b,"viewModel")},run:function(){for(var a in this.controls)this.controls[a].cb.apply(this.controls[a],this.go(this.controls[a].params,a))},go:function(a,b){for(var c=[],d=0,e=a.length;e>d;d++){var f=this.pros[a[d]];0==f.params.length?c.push(this.pros[a[d]].cb()):c.push(this.pros[a[d]].cb.apply(this.pros[a[d]],this.go(f.params,a[d])))}return c}}),a(function(){window.gg.run()})}(jQuery),function(a){function b(b){this.poll=a(b),this.pollStr=b,this.theme="img-poll",this.nowCont={},this.nowSign={},this.contClass="poll-content",this.signClass="poll-sign",this.config={animationType:"leftOutRightInSlide",data:[],auto:!0,period:5e3},this.inter=null}b.prototype.kinds={leftRightSlide:["left-slide-in","right-slide-in","out","out"],leftOutRightInSlide:["right-slide-in","right-slide-in","left-slide-out","left-slide-out"],fade:["fade-in","fade-in","fade-out","fade-out"],scale:["scale-in","scale-in","scale-out","scale-out"],rotateAndScale:["rotate-scale-in","rotate-scale-in","rotate-scale-out","rotate-scale-out"],leftRightRotate:["left-rotate-in","right-rotate-in","right-rotate-out","left-rotate-out"]},b.prototype.init=function(b){a.extend(this.config,b),this.poll.addClass(this.theme),this.build(),this.bindEvent(),this.autoDo()},b.prototype.build=function(){this.poll.html('<div class="poll-contents cf"></div><div class="poll-signs"><div class="poll-signs-content"></div></div>');for(var b=this.config.data,c=this.poll,d=0,e=b.length;e>d;d++){var f="string"==typeof b[d]?b[d]:b[d].url,g="string"==typeof b[d]?b[d]:b[d].bannerTitle,h="string"==typeof b[d]?b[d]:b[d].detail,i="string"==typeof b[d]?b[d].animationType:this.config.animationType;0===d?(a(".poll-contents").html('<div class="selected '+this.contClass+'" poll-cont="'+d+'"><a href="'+h+'"><img src="'+f+'"/></a><div class="subTitle"><p>'+g+"</p></div></div>"),a(".poll-signs-content").html('<div class="selected '+this.signClass+'" animation-type="'+i+'" poll-num="'+d+'"></div>')):(a(".poll-contents").append('<div class="'+this.contClass+' " poll-cont="'+d+'"><a href="'+h+'"><img src="'+f+'"/></a><div class="subTitle"><p>'+g+"</p></div> </div>"),a(".poll-signs-content").prepend('<div class="'+this.signClass+'" animation-type="'+i+'" poll-num="'+d+'"></div>'))}a(".poll-contents img").load(function(){var b=a(".poll-contents img").height();c.css("height",b+"px")}),this.nowSign=this.poll.find(".poll-sign.selected"),this.nowCont=this.poll.find(".poll-contents .selected")},b.prototype.bindEvent=function(){var b=this;this.poll.on("mouseover",".poll-sign",function(c){function d(c,d){var e=b.kinds[a(g).attr("animation-type")];b.nowCont.removeClass().addClass(b.contClass).addClass(e[d]),f.removeClass().addClass("selected").addClass(b.contClass).addClass(e[c]),a(b.pollStr+" .poll-sign").removeClass("selected"),a(g).addClass("selected")}var e=a(this).attr("poll-num"),f=a(b.pollStr+' .poll-contents [poll-cont="'+e+'"]'),g=this;parseInt(b.nowSign.attr("poll-num"))<parseInt(a(this).attr("poll-num"))?d(1,3):parseInt(b.nowSign.attr("poll-num"))>parseInt(a(this).attr("poll-num"))&&d(0,2),b.nowCont=f,b.nowSign=a(this),clearInterval(b.inter),b.autoDo(),c.stopPropagation()})},b.prototype.autoDo=function(){if(this.config.auto){var a=this;this.inter=setInterval(function(){a.toDo()},this.config.period)}},b.prototype.toDo=function(){var b=this.poll.find(".poll-sign.selected").prev();b.length>0?b.trigger("mouseover"):a(".poll-sign:last-child").trigger("mouseover")},window.gg=window.gg||{},window.gg.ImgPoll=b}(jQuery);
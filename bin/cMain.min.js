!function(a,b){a.controller("cIndex",["vUser","vChannel",function(c,d){function e(a,b){var c=a.substr(a.indexOf("?")+1),d={};if(c)for(var e=c.split("&"),f=0;f<e.length;f++){var g=e[f].split("=");d[g[0]]=g[1]}return d[b.toLowerCase()]}var f={since:0,id:-1,name:"",isLoad:!1},g={buildList:function(c,d){if(d.length>0)for(var e=0;e<d.length;e++)d[e].name=f.name?f.name.replace(/\s/g,""):"",d[e].time=a.util.formatDate(d[e].createdAt),d[e].srcUrl=encodeURIComponent(d[e].srcUrl),c=this.getListDom(c,d[e]),2==d[e].type&&b(".hot").show();return c},getListDom:function(a,b){switch(b.showStyle){case 0:return a=this.buildSecond(a,b),this.build0(a,b);case 1:return a=this.buildFirst(a,b),this.build1(a,b);case 2:return a=this.buildSecond(a,b),this.build2(a,b);case 3:return a=this.buildSecond(a,b),this.build3(a,b);case 4:return a=this.buildSecond(a,b),this.build4(a,b)}return""},buildFirst:function(a,b){return a+="<div class='first'>",2==b.type&&(a+="<div class='hot'type='"+b.type+"' > <img src = '../image/circle.png' /></div>"),a},buildSecond:function(a,b){return a+="<div class='second'>",2==b.type&&(a+="<div class='hot' type='"+b.type+"' > <img src = '../image/circle.png' /></div>"),a},build0:function(a,b){var c=this.build5(a,b);return a+=4==b.type?"<div class='up' id='"+b.id+"'><a class='joke' href='javascript:void(0)'skip = '"+decodeURIComponent(c)+"'srcUrl="+b.srcUrl+" >"+b.title+"</a><p></p></div>":"<div class='up' id='"+b.id+"'><a class='' href='javascript:void(0)'skip = '"+decodeURIComponent(c)+"'srcUrl="+b.srcUrl+" >"+b.title+"</a><p></p></div>",a+="<div class='bottom'>"+b.webName+" &nbsp;"+b.time+"</div>",a+="</div>"},build1:function(b,c){var d=this.build5(b,c);return b+="<div class='left'  id='"+c.id+"''><a href='javascript:void(0)' skip= '"+decodeURIComponent(d)+"'srcUrl="+c.srcUrl+"><img class='loading' onload='imgResponsive(this,1);loadingImg(this);' src='../image/loading.jpg'><img onload='imgResponsive(this,2);onloadImg(this);' src='"+c.images[0].imageUrl+"' onerror='this.onerror=null; this.src=\"../image/onerror.jpg\"'/>",b+="</a>",6==c.type&&(b+="<div class='note'><img src = '../image/note.png' />"+c.imageCount+"</div>"),(3==c.type||31==c.type)&&(b+="<div class='note'><img src = '../image/play.png' />"+a.util.formatSecond(c.videoForm.time)+"</div>"),b+="</div>",b+="<div class='right'>",b+="<div class='up' id='"+c.id+"' '><a href='javascript:void(0)'skip= '"+decodeURIComponent(d)+"'srcUrl="+c.srcUrl+">",b+=c.title.length>25?c.title.slice(0,25)+"...":c.title,b+="</a><p></p></div>",b+="<div class='bottom'>",c.tag&&(b+="<span class='tag'>"+c.tag+"</span>"),b+=c.webName+" &nbsp;"+c.time+"</div>",b+="</div>",b+="<div class='cf'></div>",b+="</div>"},build2:function(b,c){var d=this.build5(b,c);return b+="<div class='up' id='"+c.id+"'><a href='javascript:void(0)' skip= '",b+=decodeURIComponent(d),b+="'srcUrl="+c.srcUrl+">",c.title&&(b+=c.title),b+="</a></div>",b+="<div class='imgs'><a class='bigImage' href='javascript:void(0)' skip= '",b+=decodeURIComponent(d),b+="'srcUrl="+c.srcUrl+"><img class='loading' onload='loadingImg(this);' src='../image/loading-big.jpg'><img onload='imgResponsive(this,1);onloadImg(this);' src='"+c.coverImage.imageUrl+" ' onerror='this.onerror=null; this.src=\"../image/onerror-big.jpg\"'/></a>",6==c.type&&(b+="<div class='note'><img src = '../image/note.png' />"+c.imageCount+"</div>"),(3==c.type||31==c.type)&&(b+="<div class='note'><img src = '../image/play.png' />"+a.util.formatSecond(c.videoForm.time)+"</div>"),b+="</div>",b+="<div class='bottom'>"+c.webName+" &nbsp;"+c.time+"</div>",b+="</div>"},build3:function(b,c){var d=this.build5(b,c);return b+="<div class='up' id='"+c.id+"' '><a href='javascript:void(0)' skip= '"+decodeURIComponent(d)+"'srcUrl="+c.srcUrl+">",c.title&&(b+=c.title),b+="</a></div>",b+="<div class='img3'>",b+="<a href='javascript:void(0)' skip= '"+decodeURIComponent(d)+"'srcUrl="+c.srcUrl+"><img class='loading' onload='imgResponsive(this,3);loadingImg(this);' src='../image/loading.jpg'><img onload='imgResponsive(this,3);onloadImg(this);' src='"+c.images[0].imageUrl+"' onerror='this.onerror=null; this.src=\"../image/onerror.jpg\"'/></a>",b+="<a href='javascript:void(0)' skip= '"+decodeURIComponent(d)+"'srcUrl="+c.srcUrl+"><img class='loading' onload='imgResponsive(this,3);loadingImg(this);' src='../image/loading.jpg'><img onload='imgResponsive(this,3);onloadImg(this);' src='"+c.images[1].imageUrl+"' onerror='this.onerror=null; this.src=\"../image/onerror.jpg\"'/></a>",b+="<a href='javascript:void(0)' skip= '"+decodeURIComponent(d)+"'srcUrl="+c.srcUrl+"><img class='loading' onload='imgResponsive(this,3);loadingImg(this);' src='../image/loading.jpg'><img onload='imgResponsive(this,3);onloadImg(this);' src='"+c.images[2].imageUrl+"' onerror='this.onerror=null; this.src=\"../image/onerror.jpg\"'/></a>",6==c.type&&(b+="<div class='note'><img src = '../image/note.png' />"+c.imageCount+"</div>"),(3==c.type||31==c.type)&&(b+="<div class='note'><img src = '../image/play.png' />"+a.util.formatSecond(c.videoForm.time)+"</div>"),b+="<div class='cf'></div >",b+="</div>",b+="<div class='bottom'>"+c.webName+" &nbsp;"+c.time+"</div>",b+="</div>"},build4:function(a,b){var c=this.build5(a,b);return a+="<div class='up' id='"+b.id+"'><a href= 'javascript:void(0)' skip= '"+decodeURIComponent(c)+"'>"+b.title+"</a></div>",a+="<div class='img' ><a  href= 'javascript:void(0)' skip= '"+decodeURIComponent(c)+"'><img class='loading' onload='loadingImg(this);' src='../image/loading-big.jpg'><img src='",b.coverImage&&(a+=b.coverImage.imageUrl),a+="' onload='onloadImg(this);' onerror='this.onerror=null; this.src=\"../image/onerror-big.jpg\"'/></a><div class='f'>"+b.imageCount+"<h1>pcs</h1></div>",b.subTitle&&(a+="<div class='subTitle'><p>"+b.subTitle+"</p></div></div>"),a+="<div class='bottom'>"+b.webName+" &nbsp;"+b.time+"</div>",a+="</div>",a+="</div>"},build10:function(a,b){switch(b.cooperateStatus){case 0:return"details.html?type="+b.type+"&id="+b.id;case 3:return b.srcUrl+"&type="+b.type+"&id="+b.id;case 1:return"initial.html?srcUrl="+encodeURIComponent(b.srcUrl)+"&type="+b.type+"&id="+b.id+"&cooperateStatus="+b.cooperateStatus;case 2:case 4:return"initial.html?srcUrl="+encodeURIComponent(b.srcUrl)+"&type="+b.type+"&id="+b.id+"&cooperateStatus="+b.cooperateStatus}},build11:function(a,b){return 3==b.cooperateStatus?"wabridge://newsdetail?objectId="+b.id+"&type="+b.type+"&coopstatus="+b.cooperateStatus+"&srcUrl="+encodeURIComponent(b.srcUrl):"wabridge://newsdetail?objectId="+b.id+"&type="+b.type+"&coopstatus="+b.cooperateStatus},build5:function(a,b){return 0==navigator.userAgent.indexOf("WaNews")?this.build11(a,b):this.build10(a,b)}},h=function(c,d){if(c.length>0){var f=new a.ImgPoll(".shift");b(".shift").show();for(var g=[],h=[],i="",j="",k="",l=0;l<c.length;l++)g[l]=c[l].coverImage.imageUrl,i=c[l].type,j=c[l].id,k="details.html?type="+i+"&id="+j,h[l]={url:g[l],bannerTitle:c[l].title,detail:k};f.init({data:h}),b(".poll-contents").on("click","a",function(){var a,c=b(this).attr("skip"),d=e(c,"id"),f=e(c,"type");0==f||3==f||5==f||4==f?a="wanews://www.wanews.co/news/detail/"+d:2==f?a="wanews://www.wanews.co/topic/item/"+d:(1==f||6==f)&&(a="wanews://www.wanews.co/gallery/"+d),mobileAppInstall.open(a,c)})}else b(".shift").hide()};d.getLists({},function(a){var c=a.data;if(c){for(var d="",e=0;e<c.length;e++)d+='<li id="'+e+'" idss="'+c[e].channelId+'" name="'+c[e].channelName+'">'+c[e].channelName+"</li>";b(".menu").html("<ul>"+d+"</ul>"),b(".menu ul").scrollLeft(sessionStorage.getItem("length"))}}),sessionStorage.getItem("id")>0?d.getContent({id:sessionStorage.getItem("id")},function(a){var c=b(' li:eq("'+sessionStorage.getItem("idLi")+'")');c.css("color","#00bcd4").css("font-size","0.4166666rem").css("border-bottom","3px solid #f44336"),f.since=a.data.since,f.id=c.attr("id"),f.name=c.attr("name"),h(a.data.banners,f.id),sessionStorage.getItem("length"),b(".content").html(g.buildList("",a.data.list))}):(sessionStorage.setItem("id",0),d.getContent({id:0},function(a){var c=b("li:first");c.css("color","#f44336").css("font-size","0.4166666rem").css("border-bottom","3px solid #00bcd4"),f.since=a.data.since,f.id=c.attr("id"),f.name=c.attr("name"),h(a.data.banners,f.id),b(".content").html(g.buildList("",a.data.list))})),b(".menu").on("click","li",function(){f.id=b(this).attr("id"),f.name=b(this).attr("name");for(var a=b(this).parent().children(),c=0;c<a.length;c++)0==c?b(this).css("color","#f44336").css("font-size","0.4166666rem").css("border-bottom","3px solid #00bcd4"):c==b(this).attr("id")?b(this).css("color","#00bcd4").css("font-size","0.4166666rem").css("border-bottom","3px solid #f44336"):b(this).siblings().css("color","#000000").css("font-size","0.4166666rem").css("border-bottom","hidden");sessionStorage.setItem("id",b(this).attr("idss")),sessionStorage.setItem("idLi",f.id);var e=b(".menu ul").scrollLeft();sessionStorage.setItem("length",e),d.getContent({id:sessionStorage.getItem("id")},function(a){f.since=a.data.since,h(a.data.banners,f.id),b(".content").html(g.buildList("",a.data.list)),document.getElementsByTagName("body")[0].scrollTop=0})}),b(".content").on("click","a",function(){null!=b(this).attr("srcUrl")&&sessionStorage.setItem("srcUrl",b(this).attr("srcUrl")),sessionStorage.setItem("skip",b(this).attr("skip"));var a,c=b(this).attr("skip"),d=e(c,"id"),f=e(c,"type");e(c,"cooperateStatus");0==f||3==f||5==f||4==f||31==f?a="wanews://www.wanews.co/news/detail/"+d:2==f?a="wanews://www.wanews.co/topic/item/"+d:(1==f||6==f)&&(a="wanews://www.wanews.co/gallery/"+d),mobileAppInstall.open(a,c)}),navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i)?b(".bottomBanner").show():b(".bottomBanner").hide(),b(".outer").on("click","#banner",function(){a.util.browserVersion.android?mobileAppInstall.open("wanews://www.wanews.co/main","market://details?id=com.tdhot.kuaibao.android.v2","https://play.google.com/store/apps/details?id=com.tdhot.kuaibao.android.v2"):(a.util.browserVersion.ios||a.util.browserVersion.webKit||a.util.browserVersion.iPhone)&&mobileAppInstall.open("wanews://www.wanews.co/main","https://itunes.apple.com/app/id1107258303")});var i=[];b(document).scroll(function(){if(b(document).height()-b(window).scrollTop()-b(window).height()<80){for(var a=!0,c=0;i.length&&c<i.length;c++)if(i[c]==f.since){a=!1;break}a&&(i.push(f.since),d.getContent({id:sessionStorage.getItem("id"),since:"undefined"==typeof f.since?f.since=0:f.since},function(a){f.since=a.data.since,b(".content").append(g.buildList("",a.data.list))}),b(".content_loading").show())}})}])}(window.gg,jQuery);
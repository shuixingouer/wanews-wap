!function(a,b){a.controller("cDetail",["vUser","vChannel",function(c,d){var e={page:0,id:-1,name:"",isLoad:!1},f=a.util.getUrlParam().type,g=a.util.getUrlParam().id,h=encodeURIComponent(window.location.href);sessionStorage.setItem("waNews",h);0==f?d.getStaticDetails({id:g},function(c){var e=c.data?c.data:"",f=(e.author?e.author:"",e.body?e.body:""),h=e.channel?e.channel:" ",i=(h.channelName?h.channelName:"",e.id?e.id:""),j=(e.publishTime?e.publishTime:"",e.title?e.title:""),k=(e.webName?e.webName:"",e.type?e.type:""),l=e.images?e.images:"",m=(e.logoUrl?e.logoUrl:"../image/default.jpg",e.srcUrl?e.srcUrl:""),n=e.cooperateStatus?e.cooperateStatus:"";b(".outer1").show(),b(".outer4").hide(),b(".outer5").hide(),sessionStorage.setItem("id",h.channelId);var o="";if(b(document).attr("title",j),l.length>0)for(var p=l.length-1;p>=0;p--)l[p]?(l[p].imageUrl||(l[p].imageUrl=l[p].squareImageUrl),l[p].middleImageUrl||(l[p].middleImageUrl=l[p].imageUrl),l[p].smallImageUrl||(l[p].smallImageUrl=l[p].middleImageUrl),f=f.replace("tdnews://img"+p,l[p]?'<p class="image" width="'+l[p].width+'" height="'+l[p].height+'" src_path="'+l[p].middleImageUrl+'" thumb_path="'+l[p].smallImageUrl+'"></p>':"")):f=f.replace("tdnews://img"+p,(l[p],""));f=f.replace('<span class="logo"><img ','<span class="logo"><img onerror="this.onerror=null; this.src=&quot;../image/1.png&quot;"'),o="<div class ='bottomBanner'>",o+=" <a href='javascript:void(0);' id='banner'><img src='../image/banner.png'/><img src='../image/banner_button.png' class='btn'/></a>",o+="</div>",o+=" <div class='innerTop'><div class='back'><a href='main.html'><img src='../image/back.png'/></a></div><a href='initial.html?srcUrl="+encodeURIComponent(m)+"&type="+k+"&id="+i+"&cooperateStatus="+n+"'><img class='inner' src='../image/original.png'/></a></div><div class='center'>",o+="<p class='toggle-img-con'><a href='javascript:void(0)' class='tt-thin-border tt-font-1' id='toggle-img' style='display:none;'>显示大图</a></p>",o+=e?"<div class='content'>"+f:"<div style='line-height:0.66666rem;font-size:0.4rem;text-align:center;margin-top:1rem;'>当前访问的内容非有效状态，不能呈现</div>",d.getComments({id:g},function(b){o+="<div class='comment'><h3 class='title'>網友評論</h3><ul class='coms'>";for(var c=b.data?b.data:"",d=0;d<c.length;d++){var e=c[d].commentNickName,f=c[d].content,g=a.util.formatDate(c[d].commentDt),h=c[d].commentLikeNums?c[d].commentLikeNums:"0",i=c[d].commentNums?c[d].commentNums:"0";c[d].hasLike;o+="<li><a href='../view/comDetail.html?id="+c[d].id+"'><img class='avatar' src='../image/avatar.png'><div class='comsMain'>",o+="<h4>"+e+"</h4>",o+="<p>"+f+"</p>",o+="<div class='other cf'><span class='time'>"+g+"</span><span class='message'><img src='../image/message.png'>"+i+"</span><span class='line'>|</span><span class='like'><img src='../image/like-gray.png'>"+h+"</span></div></div></a></li>"}o+="</ul></div>",o+=" </div></div></div>"}),b(".outer1").html(o);var q=b(".outer1 .content .article").height();q>1e3&&(b(".outer1 .content .article").css("height","1000"),b(".outer1 .content article").append("<div class='opentext'><a href='javascript:void()0'>展开全文<img src='../image/opentext.png'/></a></div>"),b(".opentext").show(),b(".opentext").click(function(){b(".outer1 .content .article").css("height","auto"),b(".opentext").hide()})),0!=n?b(".bottomBanner").hide():(b(".outer1 .innerTop .inner").hide(),b(".bottomBanner").show(),navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i)&&b(".bottomBanner").show(),b(".outer1").on("click","#banner",function(){a.util.browserVersion.android?mobileAppInstall.open("wanews://www.wanews.co/main","market://details?id=com.tdhot.kuaibao.android.v2","https://play.google.com/store/apps/details?id=com.tdhot.kuaibao.android.v2"):a.util.browserVersion.ios&&mobileAppInstall.open("wanews://www.wanews.co/main","https://itunes.apple.com/app/id1107258303")})),initPage()}):2==f?d.getTopics({id:g,page:e.page},function(c){function f(a){switch(a){case 0:return"details.html?type="+z+"&id="+w;case 3:return param.srcUrl;case 1:return"initial.html?srcUrl="+x+"&type="+z+"&id="+w;case 2:case 4:return"initial.html?srcUrl="+encodeURIComponent(x)+"&type="+z+"&id="+w}}var g=c.data,h=g.desc,i=g.imageVo.imageUrl,j=g.simpleObjectVoList,k=g.title,l="",m=(g.topicId,g.cooperateStatus);b(document).attr("title",k),b(".outer1").hide(),b(".outer3").show(),b(".outer4").hide(),b(".outer5").hide(),l+="<div class ='bottomBanner'>  <a href='javascript:void(0);' id='banner'><img src='../image/banner.png'/><img src='../image/banner_button.png' class='btn'/></a></div>",l+="<div class='header'><div class='loading' onload='loadingImg(this);' style='position:absolute;top:0;width:100%;background:#666;bottom:0px;'></div><img onload='onloadImg(this);' style='opacity:0;' src='"+i+"' onerror='this.onerror=null; this.src=\"../image/onerror.jpg\"'/>",l+=" <div class='up'>",l+="<a href='main.html'><img src='../image/backred.png'/></a>",l+="<a id='center'>"+k+"</a>",l+="<div class='cf'></div>",l+="</div>",l+="<div class='down'><p>"+h+"</p></div>",l+="<div class='background'><img src='../image/jc.png' /></div></div> <div class='center'>",l+="<div class='content'></div></div>";for(var n="",o=0;o<j.length;o++){var p=j[o].showStyle,q=j[o].coverImage,r=j[o].title,s=j[o].cooperateStatus;r.length>25&&(r=r.slice(0,25)+"...");var t=j[o].images,u=j[o].webName,v=j[o].imageCount,w=j[o].id,x=j[o].srcUrl;sessionStorage.setItem("src",x);var y=j[o].subTitle,z=j[o].type,A=a.util.formatDate(j[o].createdAt);if(0==p){var B=f(s);n+="<div class='second'>",n+="<div class='up' id='"+w+"'><a href='"+B+"'>"+r+"</a></div>",n+="<div class='bottom'>"+u+"</div>",n+="</div>"}else if(1==p){var B=f(s);n+="<div class='first'>",n+="<div class='left' id='"+w+"'><a href='"+B+"'><img class='loading' onload='imgResponsive(this,1);loadingImg(this);' src='../image/loading.jpg'><img onload='imgResponsive(this,2);onloadImg(this);' src='"+t[0].imageUrl+"' onerror='this.onerror=null; this.src=\"../image/onerror.jpg\"'/></a></div>",n+="<div class='right'>",n+="<div class='up' id='"+w+"'><a href='"+B+"'>"+r+"</a><p></p></div>",n+="<div class='bottom'>"+u+" &nbsp;"+A+"</div>",n+="</div>",n+="<div class='cf'></div>",n+="</div>"}else if(2==p){var B=f(s);n+="<div class='second'>",n+="<div class='up' id='"+w+"' ><a href='"+B+"'>"+r+"</a></div>",n+="<div class='img'><a class='bigImage' href='"+B+"' ><img class='loading' onload='loadingImg(this);' src='../image/loading-big.jpg'><img onload='imgResponsive(this,1);onloadImg(this);' src='"+q.imageUrl+"' onerror='this.onerror=null; this.src=\"../image/onerror-big.jpg\"'/></a></div>",n+="<div class='bottom'>"+u+" &nbsp;"+A+"</div>",n+="</div>"}else if(3==p){var B=f(s);n+="<div class='second'>",n+="<div class='up' id='"+w+"' ><a href='"+B+"'>"+r+"</a></div>",n+="<div class='img3'>",n+="<a><img class='loading' onload='imgResponsive(this,3);loadingImg(this);' src='../image/loading.jpg'><img onload='imgResponsive(this,3);onloadImg(this);' src='"+t[0].imageUrl+"' onerror='this.onerror=null; this.src=\"../image/onerror.jpg\"'/></a>",n+="<a><img class='loading' onload='imgResponsive(this,3);loadingImg(this);' src='../image/loading.jpg'><img onload='imgResponsive(this,3);onloadImg(this);' src='"+t[1].imageUrl+"' onerror='this.onerror=null; this.src=\"../image/onerror.jpg\"'/></a>",n+="<a><img class='loading' onload='imgResponsive(this,3);loadingImg(this);' src='../image/loading.jpg'><img onload='imgResponsive(this,3);onloadImg(this);' src='"+t[2].imageUrl+"' onerror='this.onerror=null; this.src=\"../image/onerror.jpg\"'/></a>",n+="<div class='cf'></div >",n+="</div>",n+="<div class='bottom'>"+u+" &nbsp;"+A+"</div>",n+="</div>"}else if(4==p){var B=f(s);n+="<div class='second'>",n+="<div class='up'id='"+w+"' ><a href='"+B+"'>"+r+"</a></div>",n+="<div class='img'><a href='"+B+"'><img src='"+q.imageUrl+"'/></a><div class='f'>"+v+"<h1>pcs</h1></div>",y&&(n+="<div class='subTitle'><p>"+y+"</p></div></div>"),n+="<div class='bottom'>"+u+" &nbsp;"+A+"</div>"}}b(".outer3").html(l),b(".outer3 .content").html(n),0!=m?(b(".bottomBanner").show(),b(".outer1 .content").css("padding-bottom","0")):(b(".bottomBanner").hide(),navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i)&&b(".bottomBanner").show(),b(".outer3").on("click","#banner",function(){a.util.browserVersion.android?mobileAppInstall.open("wanews://www.wanews.co/main","market://details?id=com.tdhot.kuaibao.android.v2","https://play.google.com/store/apps/details?id=com.tdhot.kuaibao.android.v2"):a.util.browserVersion.ios&&mobileAppInstall.open("wanews://www.wanews.co/main","https://itunes.apple.com/app/id1107258303")}));var C=[];b(document).scroll(function(){if(b(document).height()-b(window).scrollTop()-b(window).height()<80){for(var a=!0,c=0;C.length&&c<C.length;c++)if(C[c]==e.page){a=!1;break}a&&(C.push(e.page),d.getTopics({id:sessionStorage.getItem("id"),page:"undefined"==typeof e.page?e.page=0:e.page},function(a){e.page=1,b(".content").append(n)}),b(".content_loading").show())}})}):4==f?d.getStaticDetails({id:g},function(c){var e=c.data?c.data:"",f=e.cooperateStatus?e.cooperateStatus:"",h=(e.id?e.id:"",e.body?e.body:"");e.images?e.images:"",e.logoUrl?e.logoUrl:"",e.title?e.title:"",e.webName?e.webName:"",e.webUrl?e.webUrl:"",e.userCommentFormList?e.userCommentFormList:"";b(document).attr("title","段子-Wanews"),b(".outer1").hide(),b(".outer3").show(),b(".outer4").hide(),b(".outer5").hide();var i="";i+="<div class ='bottomBanner'>  <a href='javascript:void(0);' id='banner'><img src='../image/banner.png'/><img src='../image/banner_button.png' class='btn'/></a></div>",i+="<div class='bg-fa'><div class='innerTop'><div class='back'><a href='main.html'><img src='../image/back.png'/></a></div></div>",i+="<div class='comment comBox jokes-p'><p class=''>"+h+"</p> </div>",i+="<div class='comment comBox noline'><h3 class='title'>網友評論</h3><div class='comslist'></div>",i+="</ul></div></div></div>",d.getComments({id:g},function(c){var d=c.data,e="";if(d.length>0){e+="<ul class='coms'>";for(var f=0;f<d.length;f++){var g=d[f].commentNickName,h=d[f].commentLikeNums?d[f].commentLikeNums:"0",i=d[f].commentNums?d[f].commentNums:"0",j=d[f].content,k=a.util.formatDate(d[f].commentDt);d[f].hasLike;e+="<li><a href='../view/comDetail.html?&id="+d[f].id+"'><img class='avatar' src='../image/avatar.png'><div class='comsMain'>",e+="<h4>"+g+"</h4>",e+="<p>"+j+"</p>",e+="<div class='other cf'><span class='time'>"+k+"</span><span class='message'><img src='../image/message.png'>"+i+"</span><span class='line'>|</span><span class='like'><img src='../image/like-gray.png'>"+h+"</span></div></div></a></li>"}e+="</ul>"}else e+="<p class='noComment'>讚時還沒有評論喔！快去評論吧</p>";b(".comslist").html(e)}),b(".outer3").html(i),0!=f?b(".bottomBanner").hide():(b(".bottomBanner").show(),navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i)&&b(".bottomBanner").show(),b(".outer3").on("click","#banner",function(){a.util.browserVersion.android?mobileAppInstall.open("wanews://www.wanews.co/main","market://details?id=com.tdhot.kuaibao.android.v2","https://play.google.com/store/apps/details?id=com.tdhot.kuaibao.android.v2"):a.util.browserVersion.ios&&mobileAppInstall.open("wanews://www.wanews.co/main","https://itunes.apple.com/app/id1107258303")}))}):6==f?(d.getDynamicDetails({id:g},function(a){var c=a.data?a.data:"",d=c.recommend?c.recommend:"",e="";if(d){e+="<div class='listPromote'><ul>";for(var f=0;f<d.length;f++){var g=d[f].srcUrl?d[f].srcUrl:"",h=d[f].coverImage?d[f].coverImage:"",i=d[f].imageCount?d[f].imageCount:"0",j=d[f].title?d[f].title:"",k=h.imageUrl;0==navigator.userAgent.indexOf("WaNews")&&(g="wabridge://newsdetail?objectId="+d[f].id+"&type="+d[f].type+"&coopstatus="+d[f].cooperateStatus),e+="<li><a class='imgatlas' href='"+g+"'><img class='loading' onload='loadingImg(this);' src='../image/loading-big.jpg'/><img onload='imgResponsive(this,2);onloadImg(this);' src='"+k+"'onerror='this.onerror=null; this.src=\"../image/onerror.jpg\"'/></a><a href='"+g+"'><h4>"+j+"</h4></a><div class='note'><img src='../image/note.png'>"+i+"</div></li>"}}e+="</ul></div>",b("#atlasPromote").html(e)}),d.getImages({id:g},function(a){function c(){b(".iSlider-p").height()<=b(".iSlider-p").css("max-height")?b(".iSlider-des .arrow-down").hide():b(".iSlider-des .arrow-down").show()}var d=a.data.images,e=a.data.title,f=(a.data.srcUrl,a.data.id,a.data.cooperateStatus,[]);b(document).attr("title",e);for(var g=0;g<d.length;g++)f.push({content:d[g].imageUrl,width:d[g].width,height:d[g].height});f.push({content:document.getElementById("atlasPromote")}),b(".iSlider-title").text(e),b(".iSlider-num").html("<span class='imgnum'>1</span>/<span class='imglen'>"+d.length+"</span>");new iSlider(document.getElementById("iSlider-wrapper"),f,{isAutoplay:0,isLooping:0,isOverspread:1,animateTime:800});c(),b(".iSlider-des .arrow-down").click(function(){b(".iSlider-p").css("max-height","100%"),b(".iSlider-des .arrow-down").hide()})}),b(".outer4").show(),b(".iSlider-top a").click(function(){history.go(-1)})):31==f&&d.getStaticDetails({id:g},function(c){var e=c.data?c.data:"",h=e.id?e.id:"",i=e.cooperateStatus?e.cooperateStatus:"",j=e.body?e.body:"",k=e.logoUrl?e.logoUrl:"",l=(e.srcUrl?e.srcUrl:"",e.webName?e.webName:""),m=e.title?e.title:"",n=e.videoForm?e.videoForm:"",o=n.playNum?n.playNum:"0";b(document).attr("title",m),b(".outer1").hide(),b(".outer3").hide(),b(".outer4").hide(),b(".outer5").show();var p="";p="<div class ='bottomBanner'>",p+=" <a href='javascript:void(0);' id='banner'><img src='../image/banner.png'/><img src='../image/banner_button.png' class='btn'/></a>",p+="</div>",p+="<div class='bg-fa'><div class='innerTop'><div class='back'><a href='main.html'><img src='../image/back.png'/></a></div></div><div class='center'>",p+=e?"<div class='embed_container'>"+j+"</div><div class='comBox vinfo'><span class='logo' style='background-image:url("+k+")'></span><span>"+l+"</span><span class='num'>"+o+" 播放</span></div><div class='recBox'></div><div class='comment comBox discuss noline'></div>":"<div style='line-height:0.66666rem;font-size:0.4rem;text-align:center;margin-top:1rem;'>当前访问的内容非有效状态，不能呈现</div>",d.getDynamicDetails({id:g},function(a){var c=a.data?a.data:"",d=c.recommend?c.recommend:"",e="";if(d.length>0){e+="<div class='comment comBox'><h3 class='title'>精彩推荐</h3><ul class='coms'>";for(var g=0;g<d.length;g++){var i=d[g].srcUrl?d[g].srcUrl:"",j=d[g].coverImage?d[g].coverImage:"",k=(d[g].imageCount?d[g].imageCount:"0",d[g].videoForm?d[g].videoForm:""),m=k.playNum?k.playNum:"0",n=d[g].title?d[g].title:"",o=j.smallImageUrl;0==navigator.userAgent.indexOf("WaNews")&&(i="wabridge://newsdetail?objectId="+d[g].id+"&type="+d[g].type+"&coopstatus="+d[g].cooperateStatus),e+="<li><a class='theme' href='details.html?type="+f+"&id="+h+"'>",e+="<div class='themeImg'><img class='loading' onload='imgResponsive(this,3);loadingImg(this);' src='../image/loading.jpg'><img onload='imgResponsive(this,3);onloadImg(this);'  src='"+o+"'onerror='this.onerror=null; this.src=\"../image/onerror.jpg\"'></div><div class='themeMain'><h4>"+n+"</h4><p><span class='author'>"+l+"</span><span class='time'>"+m+" 播放</span></p></div>",e+="</a></li>"}}e+="</ul></div>",b(".recBox").html(e)}),d.getComments({id:g},function(c){var d="";d+="<div class='comment'><h3 class='title'>網友評論</h3>";var e=c.data;if(e.length>0){d+="<ul class='coms'>";for(var f=0;f<e.length;f++){var g=e[f].commentNickName,h=e[f].content,i=a.util.formatDate(e[f].commentDt),j=e[f].commentLikeNums?e[f].commentLikeNums:"0",k=e[f].commentNums?e[f].commentNums:"0";e[f].hasLike;d+="<li><a href='../view/comDetail.html?id="+e[f].id+"'><img class='avatar' src='../image/avatar.png'><div class='comsMain'>",d+="<h4>"+g+"</h4>",d+="<p>"+h+"</p>",d+="<div class='other cf'><span class='time'>"+i+"</span><span class='message'><img src='../image/message.png'>"+k+"</span><span class='line'>|</span><span class='like'><img src='../image/like-gray.png'>"+j+"</span></div></div></a></li>"}}else d+="<p class='noComment'>讚時還沒有評論喔！快去評論吧</p>";d+="</ul></div>",b(".discuss").html(d)}),p+="</div></div>",b(".outer5").html(p);var q=document.body.clientWidth,r=9*q/16;b(".embed_container").css("width","100%").css("height",r),0!=i?b(".bottomBanner").hide():(b(".bottomBanner").show(),navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i)&&b(".bottomBanner").show(),b(".outer3").on("click","#banner",function(){a.util.browserVersion.android?mobileAppInstall.open("wanews://www.wanews.co/main","market://details?id=com.tdhot.kuaibao.android.v2","https://play.google.com/store/apps/details?id=com.tdhot.kuaibao.android.v2"):a.util.browserVersion.ios&&mobileAppInstall.open("wanews://www.wanews.co/main","https://itunes.apple.com/app/id1107258303")}))})}])}(window.gg,jQuery);